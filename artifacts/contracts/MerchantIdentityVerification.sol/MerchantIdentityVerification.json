{
  "_format": "hh-sol-artifact-1",
  "contractName": "MerchantIdentityVerification",
  "sourceName": "contracts/MerchantIdentityVerification.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "identityVerificationHubV2Address",
          "type": "address"
        },
        {
          "internalType": "contract IMerchantDataMediator",
          "name": "_userDataRouter",
          "type": "address"
        },
        {
          "internalType": "string",
          "name": "scopeValue",
          "type": "string"
        },
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "olderThan",
              "type": "uint256"
            },
            {
              "internalType": "string[]",
              "name": "forbiddenCountries",
              "type": "string[]"
            },
            {
              "internalType": "bool",
              "name": "ofacEnabled",
              "type": "bool"
            }
          ],
          "internalType": "struct SelfUtils.UnformattedVerificationConfigV2",
          "name": "rawVerificationConfig",
          "type": "tuple"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "InvalidDataFormat",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidMerchantAddress",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "MechantAlreadyVerified",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "MinAgeRequirementTooLow",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "UnauthorizedCaller",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "UnderageMerchant",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "VerificationConfigNotFound",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "nullifier",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "merchant",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "documentType",
          "type": "uint256"
        }
      ],
      "name": "MerchantVerified",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newMinAgeRequirement",
          "type": "uint256"
        }
      ],
      "name": "MinAgeRequirementUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "configId",
          "type": "bytes32"
        }
      ],
      "name": "VerificationConfigUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "merchant",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "string",
          "name": "reason",
          "type": "string"
        }
      ],
      "name": "VerificationRevoked",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "merchant",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newDocumentType",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "VerificationUpdated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "name": "getConfigId",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getMinAgeRequirement",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getScope",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "output",
          "type": "bytes"
        },
        {
          "internalType": "bytes",
          "name": "userData",
          "type": "bytes"
        }
      ],
      "name": "onVerificationSuccess",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "scope",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_minAgeRequirement",
          "type": "uint256"
        }
      ],
      "name": "setMinAgeRequirement",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes",
          "name": "proofPayload",
          "type": "bytes"
        },
        {
          "internalType": "bytes",
          "name": "userContextData",
          "type": "bytes"
        }
      ],
      "name": "verifySelfProof",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x60a060405234801561001057600080fd5b5060405161159e38038061159e83398101604081905261002f91610710565b6001600160a01b0384166080528382610050308261004b61005f565b6100b4565b60005550610935945050505050565b60004661a4ec8190036100875773f134707a4c4a3a76b8410fc0294d620a7c34158191505090565b8062aa044c036100ac57730a782f7f9f8aac6e0bacaf3cd4aa292c3275c6f291505090565b600091505090565b60006001600160a01b0382166100cc5750600061016a565b60006100d88584610171565b905060006100e585610235565b604080518082018252848152602081018390529051632b0aac7f60e11b81529192506001600160a01b0386169163561558fe9161012491600401610882565b602060405180830381865afa158015610141573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061016591906108b3565b925050505b9392505050565b60008061017d8461034d565b905060006101956101908383601f61052e565b610235565b905060006101a961019084601f602a61052e565b604080518082018252848152602081018390529051632b0aac7f60e11b81529192506001600160a01b0387169163561558fe916101e891600401610882565b602060405180830381865afa158015610205573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061022991906108b3565b93505050505b92915050565b600080829050601f815111156102a05760405162461bcd60e51b815260206004820152602560248201527f537472696e6720746f6f206c6f6e6720666f7220426967496e7420636f6e76656044820152643939b4b7b760d91b60648201526084015b60405180910390fd5b6000805b825181101561034557607f8382815181106102c1576102c16108cc565b016020015160f81c11156103175760405162461bcd60e51b815260206004820152601c60248201527f4e6f6e2d415343494920636861726163746572206465746563746564000000006044820152606401610297565b828181518110610329576103296108cc565b60209101015160f81c60089290921b91909117906001016102a4565b509392505050565b604080518082018252601081526f181899199a1a9b1b9c1cb0b131b232b360811b60208201528151602a80825260608281019094526001600160a01b0385169291600091602082018180368337019050509050600360fc1b816000815181106103b8576103b86108cc565b60200101906001600160f81b031916908160001a905350600f60fb1b816001815181106103e7576103e76108cc565b60200101906001600160f81b031916908160001a90535060005b6014811015610525578260048561041984600c6108f8565b60208110610429576104296108cc565b1a60f81b6001600160f81b031916901c60f81c60ff168151811061044f5761044f6108cc565b01602001516001600160f81b0319168261046a83600261090b565b6104759060026108f8565b81518110610485576104856108cc565b60200101906001600160f81b031916908160001a90535082846104a983600c6108f8565b602081106104b9576104b96108cc565b825191901a600f169081106104d0576104d06108cc565b01602001516001600160f81b031916826104eb83600261090b565b6104f69060036108f8565b81518110610506576105066108cc565b60200101906001600160f81b031916908160001a905350600101610401565b50949350505050565b606083600061053d8585610922565b6001600160401b0381111561055457610554610608565b6040519080825280601f01601f19166020018201604052801561057e576020820181803683370190505b509050845b848110156105e65782818151811061059d5761059d6108cc565b01602001516001600160f81b031916826105b78884610922565b815181106105c7576105c76108cc565b60200101906001600160f81b031916908160001a905350600101610583565b5095945050505050565b6001600160a01b038116811461060557600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b604051606081016001600160401b038111828210171561064057610640610608565b60405290565b604051601f8201601f191681016001600160401b038111828210171561066e5761066e610608565b604052919050565b600082601f83011261068757600080fd5b81516001600160401b038111156106a0576106a0610608565b6106b3601f8201601f1916602001610646565b8181528460208386010111156106c857600080fd5b60005b828110156106e7576020818601810151838301820152016106cb565b506000918101602001919091529392505050565b8051801515811461070b57600080fd5b919050565b6000806000806080858703121561072657600080fd5b8451610731816105f0565b6020860151909450610742816105f0565b60408601519093506001600160401b0381111561075e57600080fd5b61076a87828801610676565b606087015190935090506001600160401b0381111561078857600080fd5b85016060818803121561079a57600080fd5b6107a261061e565b8151815260208201516001600160401b038111156107bf57600080fd5b8201601f810189136107d057600080fd5b80516001600160401b038111156107e9576107e9610608565b8060051b6107f960208201610646565b9182526020818401810192908101908c84111561081557600080fd5b6020850192505b8383101561085b5782516001600160401b0381111561083a57600080fd5b6108498e602083890101610676565b8352506020928301929091019061081c565b60208601525061087192505050604083016106fb565b604082015294979396509194505050565b60408101818360005b60028110156108aa57815183526020928301929091019060010161088b565b50505092915050565b6000602082840312156108c557600080fd5b5051919050565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b8082018082111561022f5761022f6108e2565b808202811582820484141761022f5761022f6108e2565b8181038181111561022f5761022f6108e2565b608051610c476109576000396000818161015b01526102c20152610c476000f3fe608060405234801561001057600080fd5b506004361061007d5760003560e01c8063951cfa471161005b578063951cfa4714610097578063ada1b319146100c0578063d161802b146100d8578063f40ceac1146100eb57600080fd5b8063380210f8146100825780636e62d0a8146100975780638d2d8d6a146100ad575b600080fd5b610095610090366004610504565b6100f3565b005b6000545b60405190815260200160405180910390f35b6100956100bb366004610609565b610150565b61009b6100ce366004610670565b6003549392505050565b6100956100e6366004610707565b6101c0565b60015461009b565b601281101561011557604051630eed6e0b60e01b815260040160405180910390fd5b60018190556040518181527f488cdac2973ee216fa1418be1f4ee4ab5b088cb7bc1bf3ab7b3fda1d1dc1287c9060200160405180910390a150565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461019957604051635c427cd960e01b815260040160405180910390fd5b6000828060200190518101906101af9190610934565b90506101bb818361036f565b505050565b60208310156101e25760405163a512e2ff60e01b815260040160405180910390fd5b60408110156102045760405163a512e2ff60e01b815260040160405180910390fd5b833560006102156020828587610aff565b61021e91610b29565b90506000610230604060208688610aff565b61023991610b29565b9050600061024a8560408189610aff565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092018290525060035494955093925061028b915050565b905060006002600060081b6000548c8c6040516020016102af959493929190610b48565b60405160208183030381529060405290507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663f7e83aee82848b8b60405160200161030593929190610b83565b6040516020818303038152906040526040518363ffffffff1660e01b8152600401610331929190610bc9565b600060405180830381600087803b15801561034b57600080fd5b505af115801561035f573d6000803e3d6000fd5b5050505050505050505050505050565b610120815110156103935760405163a512e2ff60e01b815260040160405180910390fd5b600254604051637a3f477d60e11b81526001600160a01b039091169063f47e8efa906103c3908490600401610bf7565b600060405180830381600087803b1580156103dd57600080fd5b505af11580156103f1573d6000803e3d6000fd5b50505050600154826101600151101561041c5760405162df91b160e01b815260040160405180910390fd5b6020808301516040808501516000908152600c909352909120546001600160a01b03161580159061046a57506040838101516000908152600c60205220546001600160a01b03828116911614155b1561048857604051632bee71cd60e11b815260040160405180910390fd5b604083810180516000908152600c602090815283822080546001600160a01b0319166001600160a01b0387169081179091558083526010909152838220805460ff191660011790558651925193519293909290917f8e4fca1d88036e47b010d97c3fcb787642305cdee47d1e598d6fdd89c80deeb091a4505050565b60006020828403121561051657600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b6040516101a081016001600160401b03811182821017156105565761055661051d565b60405290565b604051601f8201601f191681016001600160401b03811182821017156105845761058461051d565b604052919050565b60006001600160401b038211156105a5576105a561051d565b50601f01601f191660200190565b600082601f8301126105c457600080fd5b81356105d76105d28261058c565b61055c565b8181528460208386010111156105ec57600080fd5b816020850160208301376000918101602001919091529392505050565b6000806040838503121561061c57600080fd5b82356001600160401b0381111561063257600080fd5b61063e858286016105b3565b92505060208301356001600160401b0381111561065a57600080fd5b610666858286016105b3565b9150509250929050565b60008060006060848603121561068557600080fd5b833592506020840135915060408401356001600160401b038111156106a957600080fd5b6106b5868287016105b3565b9150509250925092565b60008083601f8401126106d157600080fd5b5081356001600160401b038111156106e857600080fd5b60208301915083602082850101111561070057600080fd5b9250929050565b6000806000806040858703121561071d57600080fd5b84356001600160401b0381111561073357600080fd5b61073f878288016106bf565b90955093505060208501356001600160401b0381111561075e57600080fd5b61076a878288016106bf565b95989497509550505050565b600082601f83011261078757600080fd5b610791608061055c565b8060808401858111156107a357600080fd5b845b818110156107bd5780518452602093840193016107a5565b509095945050505050565b60005b838110156107e35781810151838201526020016107cb565b50506000910152565b600082601f8301126107fd57600080fd5b815161080b6105d28261058c565b81815284602083860101111561082057600080fd5b6108318260208301602087016107c8565b949350505050565b600082601f83011261084a57600080fd5b81516001600160401b038111156108635761086361051d565b8060051b6108736020820161055c565b9182526020818501810192908101908684111561088f57600080fd5b6020860192505b838310156108d55782516001600160401b038111156108b457600080fd5b6108c3886020838a01016107ec565b83525060209283019290910190610896565b9695505050505050565b600082601f8301126108f057600080fd5b6108fa606061055c565b80606084018581111561090c57600080fd5b845b818110156107bd578051801515811461092657600080fd5b84526020938401930161090e565b60006020828403121561094657600080fd5b81516001600160401b0381111561095c57600080fd5b8201610240818503121561096f57600080fd5b610977610533565b81518152602080830151908201526040808301519082015261099c8560608401610776565b606082015260e08201516001600160401b038111156109ba57600080fd5b6109c6868285016107ec565b6080830152506101008201516001600160401b038111156109e657600080fd5b6109f286828501610839565b60a0830152506101208201516001600160401b03811115610a1257600080fd5b610a1e868285016107ec565b60c0830152506101408201516001600160401b03811115610a3e57600080fd5b610a4a868285016107ec565b60e0830152506101608201516001600160401b03811115610a6a57600080fd5b610a76868285016107ec565b610100830152506101808201516001600160401b03811115610a9757600080fd5b610aa3868285016107ec565b610120830152506101a08201516001600160401b03811115610ac457600080fd5b610ad0868285016107ec565b610140830152506101c0820151610160820152610af1856101e084016108df565b610180820152949350505050565b60008085851115610b0f57600080fd5b83861115610b1c57600080fd5b5050820193919092039150565b80356020831015610b4257600019602084900360031b1b165b92915050565b60f886901b6001600160f81b031916815260ff1985166001820152602081018490528183604083013760009101604001908152949350505050565b838152818360208301376000910160200190815292915050565b60008151808452610bb58160208601602086016107c8565b601f01601f19169290920160200192915050565b604081526000610bdc6040830185610b9d565b8281036020840152610bee8185610b9d565b95945050505050565b602081526000610c0a6020830184610b9d565b939250505056fea264697066735822122094bf2365d8884d72a5f95d9f29d59600a4b9588470bd1583eed16dd55d8f2da564736f6c634300081c0033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061007d5760003560e01c8063951cfa471161005b578063951cfa4714610097578063ada1b319146100c0578063d161802b146100d8578063f40ceac1146100eb57600080fd5b8063380210f8146100825780636e62d0a8146100975780638d2d8d6a146100ad575b600080fd5b610095610090366004610504565b6100f3565b005b6000545b60405190815260200160405180910390f35b6100956100bb366004610609565b610150565b61009b6100ce366004610670565b6003549392505050565b6100956100e6366004610707565b6101c0565b60015461009b565b601281101561011557604051630eed6e0b60e01b815260040160405180910390fd5b60018190556040518181527f488cdac2973ee216fa1418be1f4ee4ab5b088cb7bc1bf3ab7b3fda1d1dc1287c9060200160405180910390a150565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461019957604051635c427cd960e01b815260040160405180910390fd5b6000828060200190518101906101af9190610934565b90506101bb818361036f565b505050565b60208310156101e25760405163a512e2ff60e01b815260040160405180910390fd5b60408110156102045760405163a512e2ff60e01b815260040160405180910390fd5b833560006102156020828587610aff565b61021e91610b29565b90506000610230604060208688610aff565b61023991610b29565b9050600061024a8560408189610aff565b8080601f016020809104026020016040519081016040528093929190818152602001838380828437600092018290525060035494955093925061028b915050565b905060006002600060081b6000548c8c6040516020016102af959493929190610b48565b60405160208183030381529060405290507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031663f7e83aee82848b8b60405160200161030593929190610b83565b6040516020818303038152906040526040518363ffffffff1660e01b8152600401610331929190610bc9565b600060405180830381600087803b15801561034b57600080fd5b505af115801561035f573d6000803e3d6000fd5b5050505050505050505050505050565b610120815110156103935760405163a512e2ff60e01b815260040160405180910390fd5b600254604051637a3f477d60e11b81526001600160a01b039091169063f47e8efa906103c3908490600401610bf7565b600060405180830381600087803b1580156103dd57600080fd5b505af11580156103f1573d6000803e3d6000fd5b50505050600154826101600151101561041c5760405162df91b160e01b815260040160405180910390fd5b6020808301516040808501516000908152600c909352909120546001600160a01b03161580159061046a57506040838101516000908152600c60205220546001600160a01b03828116911614155b1561048857604051632bee71cd60e11b815260040160405180910390fd5b604083810180516000908152600c602090815283822080546001600160a01b0319166001600160a01b0387169081179091558083526010909152838220805460ff191660011790558651925193519293909290917f8e4fca1d88036e47b010d97c3fcb787642305cdee47d1e598d6fdd89c80deeb091a4505050565b60006020828403121561051657600080fd5b5035919050565b634e487b7160e01b600052604160045260246000fd5b6040516101a081016001600160401b03811182821017156105565761055661051d565b60405290565b604051601f8201601f191681016001600160401b03811182821017156105845761058461051d565b604052919050565b60006001600160401b038211156105a5576105a561051d565b50601f01601f191660200190565b600082601f8301126105c457600080fd5b81356105d76105d28261058c565b61055c565b8181528460208386010111156105ec57600080fd5b816020850160208301376000918101602001919091529392505050565b6000806040838503121561061c57600080fd5b82356001600160401b0381111561063257600080fd5b61063e858286016105b3565b92505060208301356001600160401b0381111561065a57600080fd5b610666858286016105b3565b9150509250929050565b60008060006060848603121561068557600080fd5b833592506020840135915060408401356001600160401b038111156106a957600080fd5b6106b5868287016105b3565b9150509250925092565b60008083601f8401126106d157600080fd5b5081356001600160401b038111156106e857600080fd5b60208301915083602082850101111561070057600080fd5b9250929050565b6000806000806040858703121561071d57600080fd5b84356001600160401b0381111561073357600080fd5b61073f878288016106bf565b90955093505060208501356001600160401b0381111561075e57600080fd5b61076a878288016106bf565b95989497509550505050565b600082601f83011261078757600080fd5b610791608061055c565b8060808401858111156107a357600080fd5b845b818110156107bd5780518452602093840193016107a5565b509095945050505050565b60005b838110156107e35781810151838201526020016107cb565b50506000910152565b600082601f8301126107fd57600080fd5b815161080b6105d28261058c565b81815284602083860101111561082057600080fd5b6108318260208301602087016107c8565b949350505050565b600082601f83011261084a57600080fd5b81516001600160401b038111156108635761086361051d565b8060051b6108736020820161055c565b9182526020818501810192908101908684111561088f57600080fd5b6020860192505b838310156108d55782516001600160401b038111156108b457600080fd5b6108c3886020838a01016107ec565b83525060209283019290910190610896565b9695505050505050565b600082601f8301126108f057600080fd5b6108fa606061055c565b80606084018581111561090c57600080fd5b845b818110156107bd578051801515811461092657600080fd5b84526020938401930161090e565b60006020828403121561094657600080fd5b81516001600160401b0381111561095c57600080fd5b8201610240818503121561096f57600080fd5b610977610533565b81518152602080830151908201526040808301519082015261099c8560608401610776565b606082015260e08201516001600160401b038111156109ba57600080fd5b6109c6868285016107ec565b6080830152506101008201516001600160401b038111156109e657600080fd5b6109f286828501610839565b60a0830152506101208201516001600160401b03811115610a1257600080fd5b610a1e868285016107ec565b60c0830152506101408201516001600160401b03811115610a3e57600080fd5b610a4a868285016107ec565b60e0830152506101608201516001600160401b03811115610a6a57600080fd5b610a76868285016107ec565b610100830152506101808201516001600160401b03811115610a9757600080fd5b610aa3868285016107ec565b610120830152506101a08201516001600160401b03811115610ac457600080fd5b610ad0868285016107ec565b610140830152506101c0820151610160820152610af1856101e084016108df565b610180820152949350505050565b60008085851115610b0f57600080fd5b83861115610b1c57600080fd5b5050820193919092039150565b80356020831015610b4257600019602084900360031b1b165b92915050565b60f886901b6001600160f81b031916815260ff1985166001820152602081018490528183604083013760009101604001908152949350505050565b838152818360208301376000910160200190815292915050565b60008151808452610bb58160208601602086016107c8565b601f01601f19169290920160200192915050565b604081526000610bdc6040830185610b9d565b8281036020840152610bee8185610b9d565b95945050505050565b602081526000610c0a6020830184610b9d565b939250505056fea264697066735822122094bf2365d8884d72a5f95d9f29d59600a4b9588470bd1583eed16dd55d8f2da564736f6c634300081c0033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
