# Merchant Onboarding - Identity Verification

A Next.js application for merchant identity verification using Self Protocol integration with Celo blockchain.

## Features

- **Wallet Integration**: Connect with MetaMask and other wallets via RainbowKit
- **Self Protocol Integration**: Privacy-preserving identity verification
- **Auto-fill Functionality**: Automatically fills merchant wallet address from connected wallet
- **Comprehensive Form**: Complete MerchantOnboardingData form with all required fields
- **QR Code Generation**: Generates QR code data for Self App integration
- **Mobile-First Design**: Optimized for mobile devices

## Prerequisites

- Node.js 18+ 
- npm or yarn
- MetaMask or compatible wallet
- WalletConnect Project ID (optional, for production)

## Setup

1. **Install dependencies**:
   ```bash
   npm run setup
   ```

2. **Configure environment** (optional):
   Create a `.env.local` file with:
   ```env
   NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID=your-project-id-here
   NEXT_PUBLIC_SELF_PROTOCOL_SCOPE=merchant-onboarding
   NEXT_PUBLIC_SELF_PROTOCOL_ENDPOINT=https://api.self.xyz
   NEXT_PUBLIC_CELO_RPC_URL=https://forno.celo.org
   NEXT_PUBLIC_CELO_ALFAJORES_RPC_URL=https://alfajores-forno.celo-testnet.org
   ```

3. **Run the application**:
   ```bash
   npm run run:localhost
   ```

4. **Open your browser**:
   Navigate to `http://localhost:3000`

## Usage

1. **Connect Wallet**: Click the "Connect Wallet" button to connect your MetaMask or other wallet
2. **Fill Form**: Complete the merchant onboarding form with your business information
3. **Auto-fill**: The merchant wallet address will be automatically filled from your connected wallet
4. **Submit**: Click "Start Identity Verification" to generate QR code data
5. **Self App**: Use the generated QR code data with the Self App for identity verification

## Form Sections

### Basic Information
- Business Name (will be hashed to businessId)
- Country Selection (will be hashed to countryCodeHash)
- Credit Assessment ID (auto-generated from business name + country)
- Merchant Wallet (auto-filled)

### Collateral Information
- Collateral Address
- Collateral Type (Currency, NFT, Crypto, Real Estate, Other)

### Core Risk Metrics (0-100 scale)
- Credit Score
- Default Probability
- Loss Given Default
- Recovery Rate

### Business Fundamentals (0-100 scale)
- Business Age Score
- Revenue Stability Score
- Market Position Score
- Industry Risk Score
- Regulatory Compliance Score

### Financial Health (0-100 scale)
- Liquidity Score
- Leverage Score
- Cash Flow Score
- Profitability Score

### Risk Factors
- Market Volatility (0-100)
- Economic Cycle Position (1-5)
- Regulatory Stability (1-5)
- Seasonality (1-5)

## Technical Stack

- **Framework**: Next.js 15 with App Router
- **Styling**: Tailwind CSS
- **Wallet Integration**: RainbowKit + Wagmi
- **Blockchain**: Celo (Mainnet + Alfajores Testnet)
- **Identity Verification**: Self Protocol
- **TypeScript**: Full type safety

## Development

### Available Scripts

- `npm run dev` - Start development server
- `npm run build` - Build for production
- `npm run start` - Start production server
- `npm run lint` - Run ESLint
- `npm run run:localhost` - Alias for dev server
- `npm run setup` - Install dependencies and show setup instructions
- `npm run test` - Run tests (placeholder)

### Project Structure

```
src/
├── app/
│   ├── layout.tsx          # Root layout with providers
│   └── page.tsx            # Main page
├── components/
│   └── MerchantOnboardingForm.tsx  # Main form component
├── config/
│   └── env.ts              # Environment configuration
├── hooks/
│   └── useSelfProtocol.ts  # Self Protocol integration hook
└── types/
    └── index.ts            # TypeScript type definitions
```

## Self Protocol Integration

The application integrates with Self Protocol for privacy-preserving identity verification:

1. **Data Formatting**: Merchant data is formatted according to Self Protocol requirements
2. **QR Code Generation**: Generates QR code data for Self App scanning
3. **Privacy Preservation**: No personal data is exposed during verification
4. **Zero-Knowledge Proofs**: Uses ZK proofs for identity verification
5. **Data Hashing**: Business name and country code are hashed using keccak256 before submission
6. **Credit Assessment ID**: Auto-generated by hashing the combined business name and country code

## Celo Integration

- **Network Support**: Celo Mainnet and Alfajores Testnet
- **Mobile-First**: Optimized for Celo's mobile ecosystem
- **Low Gas Costs**: Leverages Celo's low transaction fees
- **Stablecoin Support**: Ready for Celo's stablecoin ecosystem

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests if applicable
5. Submit a pull request

## License

MIT License - see LICENSE file for details